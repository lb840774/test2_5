import json, requests

GATEWAY_URL = "https://poc-refund-test-jkvxhvno6a.gateway.bedrock-agentcore.us-east-1.amazonaws.com/mcp"

def mcp(method, params=None, id=1):
    payload = {
        "jsonrpc": "2.0",
        "id": id,
        "method": method
    }
    if params is not None:
        payload["params"] = params

    r = requests.post(GATEWAY_URL, json=payload, timeout=30)

    print("\n=== HTTP STATUS ===")
    print(r.status_code)

    print("\n=== RAW RESPONSE TEXT ===")
    print(r.text)

    print("\n=== PARSED JSON ===")
    try:
        print(json.dumps(r.json(), indent=2))
    except Exception as e:
        print("Not JSON:", e)

    return r
