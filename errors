t = ac.create_gateway_target(
    gatewayIdentifier=gateway_id,
    name=target_name,
    description="Refund tool target backed by existing Lambda",
    targetConfiguration={
        "mcp": {
            "lambda": {
                "lambdaArn": lambda_arn,

                # âœ… THIS IS THE MISSING PIECE
                "credentialProvider": {
                    "assumeRole": {
                        "roleArn": gateway_service_role_arn
                    }
                },

                "toolSchema": {
                    "inlinePayload": tool_schema
                }
            }
        }
    }
)
